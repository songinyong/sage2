// https://andrewtburks.dev/json-summary v1.1.0 Copyright 2019 Andrew Burks
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).jsonSummary=t()}(this,function(){"use strict";let e=10,t=" ",n=2,r=!0,s=!1,a="dark";var l=Object.freeze({arraySampleCount:e,indentation:t,indentCount:n,showExampleValue:r,startExpanded:s,theme:a});return{defaults:l,summarize:function(t,{arraySampleCount:n=e}=l){let r=function e(t){let r={Array:t=>{let r={count:1,type:"Array",length:t.length};if(t.length)if(n>0){let a="all"===n?t.length:Math.min(n,t.length),l={};for(;a>0;){let e=Math.floor(Math.random()*t.length);l.hasOwnProperty(e)||(l[e]=t[e],a--)}let u=[];for(let t of Object.entries(l)){let n=t[1];u.push(e(n))}let o=s(u);r.items={0:o}}else r.items={0:e(t[0])};else r.items={0:void 0};return r},Object:t=>{let n={count:1,type:"Object",keys:Object.keys(t),items:{}};for(let r of n.keys)n.items[r]=e(t[r]);return n},Other:e=>{let t;return"string"==typeof e?t=[e.length,e.length]:"number"==typeof e&&(t=[e,e]),{type:typeof e,example:e,count:1,range:t}}},a="Other";return t instanceof Array?a="Array":t instanceof Object&&(a="Object"),t&&t["*snippets_mark*"]?{type:a,circular:!0}:("Other"!==a&&(Object.defineProperty(t,"*snippets_mark*",{enumerable:!1,writable:!0,configurable:!0}),t["*snippets_mark*"]=!0),r[a](t))}(t);return function e(t){if(t&&t["*snippets_mark*"])if(delete t["*snippets_mark*"],t instanceof Array&&t.length)e(t[0]);else if(t instanceof Object)for(let n of Object.keys(t))e(t[n])}(t),r;function s(e){let t={Array:!0,Object:!0,boolean:!0,string:!0,number:!0},n=e.filter(e=>t[e.type]);if(n.length){let e=n[0].type;return function(e,t){return e=e.filter(e=>e.type===t),{string:function(e){let t=e.reduce((e,t)=>Math.min(e,t.range[0]),1/0),n=e.reduce((e,t)=>Math.max(e,t.range[1]),-1/0);return{type:"string",example:e[0].example,range:[t,n],count:e.reduce((e,t)=>e+t.count,0)}},number:function(e){let t=e.reduce((e,t)=>Math.min(e,t.range[0]),1/0),n=e.reduce((e,t)=>Math.max(e,t.range[1]),-1/0);return{type:"number",example:e[0].example,range:[t,n],count:e.reduce((e,t)=>e+t.count,0)}},boolean:function(e){return{type:"boolean",example:e[0].example,count:e.reduce((e,t)=>e+t.count,0)}},Object:function(e){let t={};for(let n of e)if(!n.circular)for(let e of n.keys)!t[e]&&(t[e]=[]),t[e].push(n.items[e]);let n={type:"Object",keys:[],items:{},count:e.length};for(let e of Object.keys(t))n.keys.push(e),n.items[e]=s(t[e]);return n},Array:function(e){let t=s(e.map(e=>e.items[0]).filter(e=>e));return{count:e.length,items:{0:t},length:t.count/e.length,type:"Array"}}}[t](e)}(n.filter(t=>t.type===e),e)}return{count:0}}},printSummary:function(e,{indentation:u=t,indentCount:o=n,showExampleValue:m=r,startExpanded:c=s,theme:i=a}=l){return`<div class="theme ${i}"><div class='json-summary-wrapper'>`+function e(t,n){let r="";if(t.circular)r+=y("(circular reference)","circular");else if("Object"===t.type){r+="{";let a=t.keys.map(e=>`'${e}'`).join(", ");r+=y(a,"keys");let l=t.keys.map(r=>e(t.items[r],n+1));if(l.length){let e="\n";for(let r=0;r<t.keys.length;r++)e+=u.repeat((n+1)*o),e+=y(t.keys[r],"name")+": ",t.count>1&&(e+=`<div class="json-summary json-summary-bar" title="${(s=t.items[t.keys[r]].count/t.count*100).toFixed(2)}%"><div class="json-summary json-summary-percentage" style="width:${s}%;"></div></div>`),e+=l[r],r<t.keys.length-1&&(e+=","),e+="\n";e+=u.repeat(n*o),r+=y(e,"child")}r=y(r+="}","layer")}else if("Array"===t.type){if(r+=y(t.count>1?"Î¼ = "+t.length.toFixed(1):t.length,"length")+" [",t.length){let s="Object"===t.items[0].type||"Array"===t.items[0].type;s&&(r+="\n"+u.repeat((n+1)*o)),r+=e(t.items[0],n+1,t.count),s&&(r+="\n"+u.repeat(n*o))}r+="]"}else null==t.example||null==t.example?r+=y("?","type"):r+=y(t.type,"type"),m&&(r+=y(t.example,"value",t.type),t.count>1&&t.range&&(r+=y(t.range,"range",t.type)));var s;return r}(e,0)+"<div></div>";function y(e,t,n){return{type:()=>`<span class="json-summary json-summary-type json-summary-type-${e}">&lt;${e}&gt;</span>`,value:()=>`<span class="json-summary json-summary-value json-summary-value-${n}">${e}</span>`,range:()=>`<span class="json-summary json-summary-range json-summary-range-${n}">[${e[0]}, ${e[1]}]</span>`,name:()=>`<span class="json-summary json-summary-name">${e}</span>`,length:()=>`<span class="json-summary json-summary-length">(${e})</span>`,circular:()=>`<span class="json-summary json-summary-circular">${e}</span>`,layer:()=>`<span class="json-summary json-summary-checkbox ${c?"checked":""}">\n              <input type="checkbox" ${c?"checked":""}>\n              <span class="json-summary-checkboxmarker" onclick="(function(me){\n                me.parentNode.classList.toggle('checked');\n              })(this)"></span>\n            </span><div class="json-summary json-summary-layer">${e}</div>`,child:()=>`<div class="json-summary json-summary-child">${e}</div>`,keys:()=>`<span class="json-summary json-summary-keys">${e}</span>`}[t]()}}}});
